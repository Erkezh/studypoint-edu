<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>elapsedtimegamejsx</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        body.embed {
            padding: 0;
            background: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
      window.lucideReact = new Proxy({}, {
        get(_, name) {
          const toKebab = s => s.replace(/([A-Z])/g, '-$1').toLowerCase().replace(/^-/, '');
          return ({ size = 24, color, strokeWidth = 2, fill = 'none', className, ...props }) => {
            const ref = React.useRef();
            React.useEffect(() => {
              if (ref.current && lucide[toKebab(name)]) {
                ref.current.innerHTML = '';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                const iconData = lucide[toKebab(name)];
                svg.setAttribute('width', size);
                svg.setAttribute('height', size);
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('fill', fill);
                svg.setAttribute('stroke', color || 'currentColor');
                svg.setAttribute('stroke-width', strokeWidth);
                svg.setAttribute('stroke-linecap', 'round');
                svg.setAttribute('stroke-linejoin', 'round');
                if (className) svg.setAttribute('class', className);
                iconData[2].forEach(el => {
                  const node = document.createElementNS('http://www.w3.org/2000/svg', el[0]);
                  Object.entries(el[1] || {}).forEach(([k,v]) => node.setAttribute(k, v));
                  svg.appendChild(node);
                });
                ref.current.appendChild(svg);
              }
            }, [size, color, strokeWidth, fill, className]);
            return React.createElement('span', { ref, style: { display: 'inline-flex' }, ...props });
          };
        }
      });
    </script>
    <script>
        (function() {
            const embedMode = /[?&]embed=1/i.test(window.location.search);
            if (embedMode) {
                document.body.classList.add('embed');
            }
            
            const { useState, useEffect, useRef, useCallback } = React;
const { Check, X } = window.lucideReact;
const taskTitles = [
  "\u0410\u044F\u049B\u0442\u0430\u043B\u0443 \u0443\u0430\u049B\u044B\u0442\u044B\u043D \u0442\u0430\u0431\u044B\u04A3\u044B\u0437",
  "\u041E\u049B\u0438\u0493\u0430 \u049B\u0430\u0448\u0430\u043D \u0430\u044F\u049B\u0442\u0430\u043B\u0434\u044B?",
  "\u04E8\u0442\u043A\u0435\u043D \u0443\u0430\u049B\u044B\u0442\u0442\u044B \u0435\u0441\u0435\u043F\u0442\u0435\u04A3\u0456\u0437",
  "\u0410\u044F\u049B\u0442\u0430\u043B\u0443 \u0441\u04D9\u0442\u0456\u043D \u0430\u043D\u044B\u049B\u0442\u0430\u04A3\u044B\u0437",
  "\u0423\u0430\u049B\u044B\u0442 \u0430\u0440\u0430\u043B\u044B\u0493\u044B\u043D \u0435\u0441\u0435\u043F\u0442\u0435\u04A3\u0456\u0437"
];
const names = [
  "\u0410\u043B\u0438\u0445\u0430\u043D",
  "\u0410\u0439\u0433\u04AF\u043B",
  "\u0411\u0435\u043A\u0437\u0430\u0442",
  "\u0414\u0430\u043D\u0430",
  "\u0415\u0440\u0436\u0430\u043D",
  "\u0424\u0430\u0440\u0438\u0437\u0430",
  "\u0492\u0430\u043B\u044B\u043C",
  "\u0413\u04AF\u043B\u043D\u0430\u0440",
  "\u049A\u0430\u0439\u0440\u0430\u0442",
  "\u0416\u0430\u043D\u043D\u0430",
  "\u041C\u0430\u0434\u0438\u043D\u0430",
  "\u041D\u04B1\u0440\u043B\u0430\u043D",
  "\u041E\u043B\u0436\u0430\u0441",
  "\u0421\u04D9\u0443\u043B\u0435",
  "\u0422\u0438\u043C\u0443\u0440",
  "\u04B0\u043B\u0430\u043D",
  "\u0410\u0440\u043C\u0430\u043D",
  "\u0414\u0456\u043D\u043C\u04B1\u0445\u0430\u043C\u0435\u0434",
  "\u0417\u0435\u0440\u0435",
  "\u041C\u04D9\u043B\u0456\u043A",
  "\u0416\u0430\u043D\u0441\u0430\u044F",
  "\u0411\u0430\u043B\u043D\u04B1\u0440",
  "\u0410\u049B\u0431\u043E\u0442\u0430",
  "\u0421\u0430\u043D\u0436\u0430\u0440"
];
const randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
const timeStr = (h, m) => `${h}:${m.toString().padStart(2, "0")}`;
const addMinutes = (h, m, add) => {
  const total = h * 60 + m + add;
  return [Math.floor(total / 60) % 24, total % 60];
};
const shuffle = (arr) => {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
};
const durationText = (d) => {
  if (d >= 60) {
    const hrs = Math.floor(d / 60);
    const mins = d % 60;
    return mins > 0 ? `${hrs} \u0441\u0430\u0493\u0430\u0442 ${mins} \u043C\u0438\u043D\u0443\u0442` : `${hrs} \u0441\u0430\u0493\u0430\u0442`;
  }
  return `${d} \u043C\u0438\u043D\u0443\u0442`;
};
const durationTextForQuestion = (d) => {
  if (d >= 60) {
    const hrs = Math.floor(d / 60);
    const mins = d % 60;
    if (mins > 0) return `${hrs} \u0441\u0430\u0493\u0430\u0442 ${mins} \u043C\u0438\u043D\u0443\u0442`;
    return `${hrs} \u0441\u0430\u0493\u0430\u0442`;
  }
  return `${d} \u043C\u0438\u043D\u0443\u0442`;
};
const scenarios = [
  (n, h, m, d) => `${timeStr(h, m)} \u0443\u0430\u049B\u044B\u0442\u0442\u0430 ${n} \u0436\u04B1\u043C\u044B\u0441\u049B\u0430 \u0448\u044B\u0493\u0443\u0493\u0430 \u0434\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0434\u044B, \u0431\u0456\u0440\u0430\u049B \u043A\u0456\u043B\u0442\u0456\u043D \u0442\u0430\u0431\u0430 \u0430\u043B\u043C\u0430\u0434\u044B. \u041A\u0456\u043B\u0442\u0442\u0456 \u0442\u0430\u0431\u0443\u0493\u0430 ${durationTextForQuestion(d)} \u043A\u0435\u0442\u0442\u0456. ${n} \u043A\u0456\u043B\u0442\u0456\u043D \u0442\u0430\u043F\u049B\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u043C\u0430\u043A\u0430\u0440\u043E\u043D \u043F\u0456\u0441\u0456\u0440\u0435 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. \u041E\u043B ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u0434\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0434\u044B. \u041C\u0430\u043A\u0430\u0440\u043E\u043D \u0434\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `\u0421\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 ${n} \u0430\u043F\u0435\u043B\u044C\u0441\u0456\u043D \u0448\u044B\u0440\u044B\u043D\u044B\u043D \u0436\u0430\u0441\u0430\u0439 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u043E\u043B \u0430\u044F\u049B\u0442\u0430\u0434\u044B. ${n} \u0430\u044F\u049B\u0442\u0430\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u043A\u04E9\u043F\u0456\u0440\u0434\u0456 \u043A\u0435\u0441\u0456\u043F \u04E9\u0442\u0443\u0456 \u043A\u0435\u0440\u0435\u043A \u0435\u0434\u0456. \u041E\u043B \u043A\u04E9\u043F\u0456\u0440\u0433\u0435 \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0448\u044B\u049B\u0442\u044B. \u041E\u0493\u0430\u043D ${durationTextForQuestion(d)} \u043A\u0435\u0442\u0442\u0456. ${n} \u043A\u04E9\u043F\u0456\u0440\u0434\u0456 \u043A\u0435\u0441\u0456\u043F \u04E9\u0442\u043A\u0435\u043D\u0434\u0435 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u043C\u0435\u043A\u0442\u0435\u043F\u0442\u0435\u043D \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u049B\u0430\u0439\u0442\u0442\u044B. \u041E\u043B \u043A\u0435\u043A\u0441 \u043F\u0456\u0441\u0456\u0440\u0443\u0434\u0456 \u0448\u0435\u0448\u0442\u0456. \u041A\u0435\u043A\u0441 \u043F\u0456\u0441\u0456\u0440\u0443\u0433\u0435 ${durationTextForQuestion(d)} \u043A\u0435\u0442\u0442\u0456. \u041A\u0435\u043A\u0441 \u0434\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0440\u0430\u0434\u0438\u043E\u0434\u0430\u043D \u0441\u04AF\u0439\u0456\u043A\u0442\u0456 \u04D9\u043D\u0456\u043D \u0435\u0441\u0442\u0456\u0434\u0456. \u04D8\u043D \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0441\u0442\u0430\u043B\u044B\u043F, ${durationTextForQuestion(d)} \u0441\u043E\u0437\u044B\u043B\u0434\u044B. \u04D8\u043D \u0430\u044F\u049B\u0442\u0430\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u043A\u0438\u043D\u043E\u0442\u0435\u0430\u0442\u0440\u0434\u0430 \u043A\u0435\u0437\u0435\u043A\u043A\u0435 \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0442\u04B1\u0440\u0434\u044B. ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u043E\u0440\u043D\u044B\u043D\u0430 \u043E\u0442\u044B\u0440\u0434\u044B. \u041E\u0442\u044B\u0440\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `\u0421\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 ${n} \u044B\u0434\u044B\u0441 \u0436\u0443\u0430 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. \u0411\u0430\u0440\u043B\u044B\u049B \u044B\u0434\u044B\u0441\u0442\u044B \u0436\u0443\u0443\u0493\u0430 ${durationTextForQuestion(d)} \u043A\u0435\u0442\u0442\u0456. \u042B\u0434\u044B\u0441 \u0436\u0443\u044B\u043B\u044B\u043F \u0431\u043E\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u043A\u0456\u0442\u0430\u043F \u043E\u049B\u0438 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u043E\u049B\u0443\u0434\u044B \u0442\u043E\u049B\u0442\u0430\u0442\u0442\u044B. \u0422\u043E\u049B\u0442\u0430\u0442\u049B\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `\u0421\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u04B1\u0440\u0448\u0430\u049B \u0436\u0430\u0443\u0430 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. \u0411\u04B1\u0440\u0448\u0430\u049B ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u0442\u043E\u049B\u0442\u0430\u0434\u044B. \u0422\u043E\u049B\u0442\u0430\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0430\u0432\u0442\u043E\u0431\u0443\u0441\u049B\u0430 \u043C\u0456\u043D\u0434\u0456. ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u0442\u04AF\u0441\u0442\u0456. \u0422\u04AF\u0441\u043A\u0435\u043D\u0434\u0435 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0442\u0430\u0440\u0438\u0445\u0438 \u0441\u0430\u0440\u0430\u0439\u0493\u0430 \u044D\u043A\u0441\u043A\u0443\u0440\u0441\u0438\u044F\u0493\u0430 \u0431\u0430\u0440\u0434\u044B. \u042D\u043A\u0441\u043A\u0443\u0440\u0441\u0438\u044F \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0441\u0442\u0430\u043B\u044B\u043F, ${durationTextForQuestion(d)} \u0441\u043E\u0437\u044B\u043B\u0434\u044B. \u0410\u044F\u049B\u0442\u0430\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u04AF\u0439 \u0442\u0430\u043F\u0441\u044B\u0440\u043C\u0430\u0441\u044B\u043D \u0431\u0430\u0441\u0442\u0430\u0434\u044B. \u041E\u0493\u0430\u043D ${durationTextForQuestion(d)} \u043A\u0435\u0442\u0442\u0456. \u0422\u0430\u043F\u0441\u044B\u0440\u043C\u0430\u043D\u044B \u0430\u044F\u049B\u0442\u0430\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0444\u043E\u0440\u0442\u0435\u043F\u0438\u0430\u043D\u043E \u0441\u0430\u0431\u0430\u0493\u044B \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0441\u0442\u0430\u043B\u0434\u044B. \u0421\u0430\u0431\u0430\u049B ${durationTextForQuestion(d)} \u0441\u043E\u0437\u044B\u043B\u0434\u044B. \u0421\u0430\u0431\u0430\u049B \u0430\u044F\u049B\u0442\u0430\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0436\u0430\u0440\u044B\u0441\u049B\u0430 \u049B\u0430\u0442\u044B\u0441\u0442\u044B. \u0416\u0430\u0440\u044B\u0441 \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0441\u0442\u0430\u043B\u044B\u043F, ${durationTextForQuestion(d)} \u0441\u043E\u0437\u044B\u043B\u0434\u044B. \u0416\u0430\u0440\u044B\u0441 \u0430\u044F\u049B\u0442\u0430\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0441\u0435\u0440\u0443\u0435\u043D\u0433\u0435 \u0448\u044B\u049B\u0442\u044B. ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u04AF\u0439\u0433\u0435 \u049B\u0430\u0439\u0442\u0442\u044B. \u049A\u0430\u0439\u0442\u049B\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0434\u04AF\u043A\u0435\u043D\u0433\u0435 \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0440\u0434\u044B. \u0414\u04AF\u043A\u0435\u043D\u0434\u0435 ${durationTextForQuestion(d)} \u0436\u04AF\u0440\u0434\u0456. \u0414\u04AF\u043A\u0435\u043D\u043D\u0435\u043D \u0448\u044B\u049B\u049B\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0441\u0443\u0440\u0435\u0442\u0456\u043D \u0441\u0430\u043B\u0430 \u0431\u0430\u0441\u0442\u0430\u0434\u044B. \u0421\u0443\u0440\u0435\u0442 ${durationTextForQuestion(d)} \u043A\u0435\u0439\u0456\u043D \u0434\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0434\u044B. \u0414\u0430\u0439\u044B\u043D \u0431\u043E\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u043C\u04B1\u0440\u0430\u0436\u0430\u0439\u0493\u0430 \u0431\u0430\u0440\u0434\u044B. \u042D\u043A\u0441\u043A\u0443\u0440\u0441\u0438\u044F \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0441\u0442\u0430\u043B\u044B\u043F, ${durationTextForQuestion(d)} \u0441\u043E\u0437\u044B\u043B\u0434\u044B. \u0410\u044F\u049B\u0442\u0430\u043B\u0493\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`,
  (n, h, m, d) => `${n} \u0431\u0430\u0441\u0441\u0435\u0439\u043D\u0433\u0435 \u0441\u0430\u0493\u0430\u0442 ${timeStr(h, m)}-\u0434\u0435 \u0431\u0430\u0440\u0434\u044B. \u041E\u043B ${durationTextForQuestion(d)} \u0436\u04AF\u0437\u0434\u0456. \u0411\u0430\u0441\u0441\u0435\u0439\u043D\u043D\u0435\u043D \u0448\u044B\u049B\u049B\u0430\u043D\u0434\u0430 \u0441\u0430\u0493\u0430\u0442 \u043D\u0435\u0448\u0435\u0434\u0435 \u0431\u043E\u043B\u0434\u044B?`
];
const generateDistractors = (correctH, correctM, duration, startH) => {
  const distractors = /* @__PURE__ */ new Set();
  const correctStr = timeStr(correctH, correctM);
  const [dh1, dm1] = addMinutes(startH, correctM, -duration);
  if (dh1 >= 1 && dh1 <= 23) distractors.add(timeStr(dh1, dm1));
  const offsets = [-10, 10, -30, 30, -46, 46, -20, 20, 60, -60];
  for (const off of offsets) {
    const [dh, dm] = addMinutes(correctH, correctM, off);
    if (dh >= 1 && dh <= 23) {
      const s = timeStr(dh, dm);
      if (s !== correctStr) distractors.add(s);
    }
    if (distractors.size >= 6) break;
  }
  let swapH = correctH + randInt(1, 3);
  if (swapH > 23) swapH -= 12;
  if (swapH < 1) swapH = 1;
  const swapStr = timeStr(swapH, correctM);
  if (swapStr !== correctStr) distractors.add(swapStr);
  distractors.delete(correctStr);
  return shuffle([...distractors]).slice(0, 3);
};
const generateProblem = () => {
  const name = names[randInt(0, names.length - 1)];
  const hour = randInt(1, 22);
  const minute = randInt(0, 59);
  const duration = randInt(2, 55);
  const [correctH, correctM] = addMinutes(hour, minute, duration);
  if (correctH > 23 || correctH < 1) return generateProblem();
  const scenarioIdx = randInt(0, scenarios.length - 1);
  const correctAnswer = timeStr(correctH, correctM);
  const question = scenarios[scenarioIdx](name, hour, minute, duration);
  const titleIdx = randInt(0, taskTitles.length - 1);
  const distractors = generateDistractors(correctH, correctM, duration, hour);
  const options = shuffle([correctAnswer, ...distractors]);
  return {
    id: Date.now(),
    taskTitle: taskTitles[titleIdx],
    question,
    correctAnswer,
    options,
    startTime: timeStr(hour, minute),
    duration,
    visualData: {
      type: "elapsed_time",
      startTime: timeStr(hour, minute),
      duration,
      endTime: correctAnswer
    }
  };
};
const ElapsedTimeGame = () => {
  const [problem, setProblem] = useState(null);
  const [selected, setSelected] = useState(null);
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);
  const containerRef = useRef(null);
  const sendHeight = useCallback(() => {
    if (window.parent !== window && containerRef.current) {
      window.parent.postMessage(
        { type: "resize", height: containerRef.current.scrollHeight + 20 },
        "*"
      );
    }
  }, []);
  useEffect(() => {
    setProblem(generateProblem());
  }, []);
  useEffect(() => {
    sendHeight();
    const t = setTimeout(sendHeight, 100);
    return () => clearTimeout(t);
  }, [problem, showResult, sendHeight]);
  const handleSelect = (opt) => {
    if (showResult) return;
    setSelected(opt);
  };
  const handleSubmit = () => {
    if (!selected || !problem || showResult) return;
    const correct = selected === problem.correctAnswer;
    setIsCorrect(correct);
    setShowResult(true);
    window.parent.postMessage(
      {
        type: "exercise-result",
        isCorrect: correct,
        question: problem.question,
        userAnswer: selected,
        correctAnswer: problem.correctAnswer,
        questionData: problem.visualData
      },
      "*"
    );
    if (correct) {
      setTimeout(() => {
        setProblem(generateProblem());
        setSelected(null);
        setShowResult(false);
      }, 2e3);
    }
  };
  const handleNext = () => {
    setProblem(generateProblem());
    setSelected(null);
    setShowResult(false);
  };
  if (!problem) return null;
  return /* @__PURE__ */ React.createElement("div", { ref: containerRef, style: { fontFamily: "Verdana, Geneva, sans-serif", maxWidth: 560, margin: "0 auto", padding: 20 } }, /* @__PURE__ */ React.createElement("h1", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(1.1rem, 4vw, 1.45rem)",
    color: "#323048",
    textAlign: "center",
    marginBottom: 28,
    fontWeight: "bold",
    lineHeight: 1.4
  } }, "\u0423\u0430\u049B\u044B\u0442 \u0435\u0441\u0435\u043F\u0442\u0435\u0440\u0456"), /* @__PURE__ */ React.createElement("div", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(0.82rem, 3vw, 0.95rem)",
    color: "#555",
    marginBottom: 14,
    fontWeight: "bold"
  } }, problem.taskTitle), /* @__PURE__ */ React.createElement("div", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(0.85rem, 3.2vw, 1rem)",
    color: "#222",
    lineHeight: 1.65,
    marginBottom: 24
  } }, problem.question), /* @__PURE__ */ React.createElement("div", { style: {
    display: "grid",
    gridTemplateColumns: "1fr 1fr",
    gap: 12,
    marginBottom: 24
  } }, problem.options.map((opt, i) => {
    let bg = "#ffffff";
    let borderColor = "#d0d0d8";
    let color = "#222";
    if (showResult) {
      if (opt === problem.correctAnswer) {
        bg = "#e8f5e9";
        borderColor = "#34a853";
        color = "#2e7d32";
      } else if (opt === selected && !isCorrect) {
        bg = "#fce8e6";
        borderColor = "#d93025";
        color = "#c62828";
      }
    } else if (opt === selected) {
      bg = "#eeeef4";
      borderColor = "#323048";
    }
    return /* @__PURE__ */ React.createElement(
      "button",
      {
        key: i,
        onClick: () => handleSelect(opt),
        disabled: showResult,
        style: {
          fontFamily: "Verdana, Geneva, sans-serif",
          fontSize: "clamp(0.95rem, 3.5vw, 1.15rem)",
          padding: "14px 10px",
          background: bg,
          border: `2px solid ${borderColor}`,
          borderRadius: 10,
          cursor: showResult ? "default" : "pointer",
          color,
          textAlign: "center",
          WebkitAppearance: "none",
          appearance: "none",
          outline: "none",
          opacity: showResult && opt !== problem.correctAnswer && opt !== selected ? 0.85 : 1,
          transition: "border-color 0.15s, background 0.15s"
        }
      },
      opt
    );
  })), !showResult && /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleSubmit,
      disabled: !selected,
      style: {
        fontFamily: "Verdana, Geneva, sans-serif",
        fontSize: "clamp(0.9rem, 3.2vw, 1.05rem)",
        fontWeight: "bold",
        padding: "13px 36px",
        background: "#323048",
        color: "#fff",
        border: "none",
        borderRadius: 10,
        cursor: selected ? "pointer" : "default",
        display: "block",
        margin: "0 auto",
        opacity: selected ? 1 : 0.45,
        letterSpacing: 0.3,
        transition: "opacity 0.15s"
      }
    },
    "\u0422\u0435\u043A\u0441\u0435\u0440\u0443"
  ), showResult && /* @__PURE__ */ React.createElement("div", { style: { textAlign: "center", marginTop: 20 } }, isCorrect ? /* @__PURE__ */ React.createElement("div", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(0.95rem, 3.5vw, 1.15rem)",
    fontWeight: "bold",
    color: "#34a853",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    gap: 6
  } }, /* @__PURE__ */ React.createElement(Check, { size: 20 }), " \u0414\u04B1\u0440\u044B\u0441") : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement("div", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(0.95rem, 3.5vw, 1.15rem)",
    fontWeight: "bold",
    color: "#d93025",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    gap: 6
  } }, /* @__PURE__ */ React.createElement(X, { size: 20 }), " \u049A\u0430\u0442\u0435"), /* @__PURE__ */ React.createElement("div", { style: {
    fontFamily: "Verdana, Geneva, sans-serif",
    fontSize: "clamp(0.78rem, 2.8vw, 0.88rem)",
    color: "#444",
    background: "#fff7f0",
    borderLeft: "3px solid #e8a04c",
    padding: "12px 14px",
    marginTop: 14,
    borderRadius: "0 8px 8px 0",
    lineHeight: 1.6,
    textAlign: "left"
  } }, problem.startTime, " + ", durationText(problem.duration), " = ", problem.correctAnswer, ". \u0414\u04B1\u0440\u044B\u0441 \u0436\u0430\u0443\u0430\u043F: ", problem.correctAnswer), /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleNext,
      style: {
        fontFamily: "Verdana, Geneva, sans-serif",
        fontSize: "clamp(0.85rem, 3vw, 0.95rem)",
        fontWeight: "bold",
        padding: "10px 28px",
        background: "#323048",
        color: "#fff",
        border: "none",
        borderRadius: 10,
        cursor: "pointer",
        marginTop: 16,
        transition: "opacity 0.15s"
      }
    },
    "\u0422\u04AF\u0441\u0456\u043D\u0434\u0456\u043C"
  ))));
};

            
            // Рендерим компонент
            ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(ElapsedTimeGame));
            
            // Отправляем INIT сообщение
            if (embedMode && window.parent) {
                window.parent.postMessage({ type: 'INIT', status: 'ready' }, '*');
            }
        })();
    </script>
</body>
</html>