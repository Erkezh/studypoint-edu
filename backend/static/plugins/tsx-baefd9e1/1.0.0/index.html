<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сандарды өсу ретімен орналастыру</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        body.embed {
            padding: 0;
            background: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
      window.lucideReact = new Proxy({}, {
        get(_, name) {
          const toKebab = s => s.replace(/([A-Z])/g, '-$1').toLowerCase().replace(/^-/, '');
          return ({ size = 24, color, strokeWidth = 2, fill = 'none', className, ...props }) => {
            const ref = React.useRef();
            React.useEffect(() => {
              if (ref.current && lucide[toKebab(name)]) {
                ref.current.innerHTML = '';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                const iconData = lucide[toKebab(name)];
                svg.setAttribute('width', size);
                svg.setAttribute('height', size);
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('fill', fill);
                svg.setAttribute('stroke', color || 'currentColor');
                svg.setAttribute('stroke-width', strokeWidth);
                svg.setAttribute('stroke-linecap', 'round');
                svg.setAttribute('stroke-linejoin', 'round');
                if (className) svg.setAttribute('class', className);
                iconData[2].forEach(el => {
                  const node = document.createElementNS('http://www.w3.org/2000/svg', el[0]);
                  Object.entries(el[1] || {}).forEach(([k,v]) => node.setAttribute(k, v));
                  svg.appendChild(node);
                });
                ref.current.appendChild(svg);
              }
            }, [size, color, strokeWidth, fill, className]);
            return React.createElement('span', { ref, style: { display: 'inline-flex' }, ...props });
          };
        }
      });
    </script>
    <script>
        (function() {
            const embedMode = /[?&]embed=1/i.test(window.location.search);
            if (embedMode) {
                document.body.classList.add('embed');
            }
            
            const { useState, useEffect, useRef } = React;
const allQuestions = [
  {
    numbers: [297582, 793257, 415763],
    order: "largest",
    correct: [793257, 415763, 297582]
  },
  {
    numbers: [733464, 829673, 734366],
    order: "smallest",
    correct: [733464, 734366, 829673]
  },
  {
    numbers: [579823, 540190, 579923],
    order: "smallest",
    correct: [540190, 579823, 579923]
  },
  {
    numbers: [1091975, 9054988, 9152988],
    order: "largest",
    correct: [9152988, 9054988, 1091975]
  },
  {
    numbers: [2679203, 5568079, 3900745],
    order: "smallest",
    correct: [2679203, 3900745, 5568079]
  },
  {
    numbers: [7417894, 5346037, 7108106],
    order: "largest",
    correct: [7417894, 7108106, 5346037]
  },
  {
    numbers: [4455766, 4965766, 4755766],
    order: "largest",
    correct: [4965766, 4755766, 4455766]
  },
  {
    numbers: [3494673, 3011766, 3094726],
    order: "largest",
    correct: [3494673, 3094726, 3011766]
  },
  {
    numbers: [6495603, 6481603, 6495203],
    order: "largest",
    correct: [6495603, 6495203, 6481603]
  },
  {
    numbers: [2773732, 8702697, 2814792],
    order: "largest",
    correct: [8702697, 2814792, 2773732]
  },
  {
    numbers: [724461, 3004882, 794451],
    order: "smallest",
    correct: [724461, 794451, 3004882]
  },
  {
    numbers: [5383495, 5313455, 5193413, 7676673],
    order: "smallest",
    correct: [5193413, 5313455, 5383495, 7676673]
  },
  {
    numbers: [1145221, 1171211, 2390763, 1185261],
    order: "largest",
    correct: [2390763, 1185261, 1171211, 1145221]
  },
  {
    numbers: [1724790, 1521094, 1021099, 1421090],
    order: "smallest",
    correct: [1021099, 1421090, 1521094, 1724790]
  },
  {
    numbers: [7765355, 7865555, 7355605, 7864555],
    order: "smallest",
    correct: [7355605, 7765355, 7864555, 7865555]
  },
  {
    numbers: [2308314, 9502866, 217060, 217240],
    order: "smallest",
    correct: [217060, 217240, 2308314, 9502866]
  },
  {
    numbers: [2519641, 864193, 2769678, 2360798],
    order: "largest",
    correct: [2769678, 2519641, 2360798, 864193]
  },
  {
    numbers: [9461334, 440443, 9491133, 9461133],
    order: "largest",
    correct: [9491133, 9461334, 9461133, 440443]
  }
];
const NumberOrderingGame = () => {
  const [problem, setProblem] = useState(null);
  const [userAnswer, setUserAnswer] = useState([]);
  const [availableNumbers, setAvailableNumbers] = useState([]);
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);
  const containerRef = useRef(null);
  const generateProblem = () => {
    const randomQuestion = allQuestions[Math.floor(Math.random() * allQuestions.length)];
    return {
      id: Date.now(),
      ...randomQuestion
    };
  };
  const sendHeight = () => {
    if (window.parent !== window && containerRef.current) {
      window.parent.postMessage(
        { type: "resize", height: containerRef.current.scrollHeight + 20 },
        "*"
      );
    }
  };
  useEffect(() => {
    setProblem(generateProblem());
  }, []);
  useEffect(() => {
    if (problem) {
      setAvailableNumbers([...problem.numbers]);
      setUserAnswer([]);
      setShowResult(false);
    }
  }, [problem]);
  useEffect(() => {
    sendHeight();
    setTimeout(sendHeight, 100);
  }, [problem, showResult, userAnswer]);
  const handleNumberClick = (num) => {
    if (showResult) return;
    setUserAnswer([...userAnswer, num]);
    setAvailableNumbers(availableNumbers.filter((n, i) => {
      const idx = availableNumbers.indexOf(num);
      return i !== idx;
    }));
  };
  const handleAnswerClick = (index) => {
    if (showResult) return;
    const num = userAnswer[index];
    setAvailableNumbers([...availableNumbers, num]);
    setUserAnswer(userAnswer.filter((_, i) => i !== index));
  };
  const handleSubmit = () => {
    if (!problem || userAnswer.length !== problem.numbers.length) return;
    const correct = userAnswer.length === problem.correct.length && userAnswer.every((num, idx) => num === problem.correct[idx]);
    setIsCorrect(correct);
    const questionText = problem.order === "largest" ? "\u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u043A\u0435\u043C\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u044B\u04A3\u044B\u0437" : "\u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u04E9\u0441\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u044B\u04A3\u044B\u0437";
    if (window.parent !== window) {
      window.parent.postMessage({
        type: "exercise-result",
        isCorrect: correct,
        question: questionText,
        userAnswer: userAnswer.join(" \u2192 "),
        correctAnswer: problem.correct.join(" \u2192 "),
        questionData: {
          type: "number-ordering",
          numbers: problem.numbers,
          order: problem.order,
          correctSequence: problem.correct
        }
      }, "*");
    }
    setShowResult(true);
  };
  const handleNext = () => {
    setProblem(generateProblem());
    setUserAnswer([]);
    setShowResult(false);
  };
  const getTaskTitle = () => {
    if (!problem) return "";
    return problem.order === "largest" ? "\u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u043A\u0435\u043C\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u044B\u04A3\u044B\u0437" : "\u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u04E9\u0441\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u044B\u04A3\u044B\u0437";
  };
  const getExplanation = () => {
    if (!problem) return "";
    const correctAnswer = problem.correct.join(" \u2192 ");
    return problem.order === "largest" ? `\u0414\u04B1\u0440\u044B\u0441 \u0436\u0430\u0443\u0430\u043F: ${correctAnswer}. \u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u043A\u0435\u043C\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u0443 \u04AF\u0448\u0456\u043D \u0435\u04A3 \u04AF\u043B\u043A\u0435\u043D \u0441\u0430\u043D\u043D\u0430\u043D \u0431\u0430\u0441\u0442\u0430\u043F \u0435\u04A3 \u043A\u0456\u0448\u0456\u0433\u0435 \u0434\u0435\u0439\u0456\u043D \u0440\u0435\u0442\u0442\u0435\u0443 \u043A\u0435\u0440\u0435\u043A.` : `\u0414\u04B1\u0440\u044B\u0441 \u0436\u0430\u0443\u0430\u043F: ${correctAnswer}. \u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u04E9\u0441\u0443\u0456 \u0431\u043E\u0439\u044B\u043D\u0448\u0430 \u043E\u0440\u043D\u0430\u043B\u0430\u0441\u0442\u044B\u0440\u0443 \u04AF\u0448\u0456\u043D \u0435\u04A3 \u043A\u0456\u0448\u0456 \u0441\u0430\u043D\u043D\u0430\u043D \u0431\u0430\u0441\u0442\u0430\u043F \u0435\u04A3 \u04AF\u043B\u043A\u0435\u043D\u0433\u0435 \u0434\u0435\u0439\u0456\u043D \u0440\u0435\u0442\u0442\u0435\u0443 \u043A\u0435\u0440\u0435\u043A.`;
  };
  if (!problem) {
    return /* @__PURE__ */ React.createElement("div", { ref: containerRef, className: "p-4 max-w-2xl mx-auto" }, /* @__PURE__ */ React.createElement("div", { className: "text-center" }, "\u0416\u04AF\u043A\u0442\u0435\u043B\u0443\u0434\u0435..."));
  }
  return /* @__PURE__ */ React.createElement("div", { ref: containerRef, className: "p-4 max-w-2xl mx-auto font-[Verdana,sans-serif]" }, /* @__PURE__ */ React.createElement("h1", { className: "text-xl md:text-2xl text-center mb-6 font-bold" }, "\u0421\u0430\u043D\u0434\u0430\u0440\u0434\u044B \u0440\u0435\u0442\u0442\u0435\u0443"), /* @__PURE__ */ React.createElement("p", { className: "text-base md:text-lg mb-5 text-center font-medium" }, getTaskTitle()), /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap gap-2 justify-center mb-5" }, availableNumbers.map((num, idx) => /* @__PURE__ */ React.createElement(
    "button",
    {
      key: idx,
      onClick: () => handleNumberClick(num),
      disabled: showResult,
      className: "px-4 py-2 text-sm md:text-base bg-green-500 text-white rounded hover:bg-green-600 disabled:cursor-default disabled:opacity-70"
    },
    num
  ))), /* @__PURE__ */ React.createElement("div", { className: "flex flex-wrap gap-2 justify-center mb-5 min-h-[60px] p-3 bg-white border border-gray-300 rounded" }, userAnswer.map((num, idx) => /* @__PURE__ */ React.createElement(
    "button",
    {
      key: idx,
      onClick: () => handleAnswerClick(idx),
      disabled: showResult,
      className: "px-4 py-2 text-sm md:text-base bg-blue-500 text-white rounded hover:bg-blue-600 disabled:cursor-default disabled:opacity-70"
    },
    num
  ))), !showResult && /* @__PURE__ */ React.createElement("div", { className: "text-center" }, /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleSubmit,
      disabled: userAnswer.length !== problem.numbers.length,
      className: "px-8 py-3 text-base md:text-lg bg-[#323048] text-white rounded disabled:opacity-60 disabled:cursor-not-allowed hover:bg-[#424058] transition-colors"
    },
    "\u0422\u0435\u043A\u0441\u0435\u0440\u0443"
  )), showResult && /* @__PURE__ */ React.createElement("div", { className: "mt-5 text-center" }, isCorrect ? /* @__PURE__ */ React.createElement("div", { className: "text-xl md:text-2xl text-green-500 font-bold mb-4" }, "\u2713 \u0414\u04B1\u0440\u044B\u0441") : /* @__PURE__ */ React.createElement("div", null, /* @__PURE__ */ React.createElement("div", { className: "text-xl md:text-2xl text-red-500 font-bold mb-4" }, "\u049A\u0430\u0442\u0435"), /* @__PURE__ */ React.createElement("div", { className: "text-sm md:text-base text-gray-700 mb-5 p-4 bg-gray-100 rounded leading-relaxed" }, getExplanation())), /* @__PURE__ */ React.createElement(
    "button",
    {
      onClick: handleNext,
      className: "px-8 py-3 text-base md:text-lg bg-[#323048] text-white rounded hover:bg-[#424058] transition-colors"
    },
    isCorrect ? "\u041A\u0435\u043B\u0435\u0441\u0456" : "\u0422\u04AF\u0441\u0456\u043D\u0434\u0456\u043C"
  )));
};

            
            // Рендерим компонент
            ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(NumberOrderingGame));
            
            // Отправляем INIT сообщение
            if (embedMode && window.parent) {
                window.parent.postMessage({ type: 'INIT', status: 'ready' }, '*');
            }
        })();
    </script>
</body>
</html>